#include <climits>

#include "Type.h"

namespace IR {
    //------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------Type-------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------
    
    Type::Type (size_t bitsCount, TypeId typeId) : bitsCount (bitsCount), size ((bitsCount + CHAR_BIT - 1) / CHAR_BIT), typeId (typeId) {}
    
    size_t Type::GetSize   () const { return size; }
    TypeId Type::GetTypeId () const { return typeId; }
    
    //------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------Integer----------------------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------
    
    IntegerType::IntegerType (size_t size, bool isUnsigned) : Type (size, TypeId::INTEGER_TYPE), isUnsigned (isUnsigned) {}
    
    bool IntegerType::IsUnsigned () const { return isUnsigned; }

    //------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------FloatType--------------------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------

    FloatType::FloatType (size_t size) : Type (size, TypeId::FLOAT_TYPE) {}
    
    //------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------TypesImplementation----------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------
    //
    const IntegerType *TypesImplementation::GetInt64Ty  () const { return &int64Type; }
    const IntegerType *TypesImplementation::GetInt1Ty   () const { return &int1Type;  }
    const FloatType   *TypesImplementation::GetDoubleTy () const { return &doubleType;}

}
